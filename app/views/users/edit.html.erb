
<%= form_tag user_path, method: :put , :multipart =>true  do %>
<div class="row">
<div class="col-xs-10">
  <div class="form-group">
    <%= label :user, :name %>
    <%= text_field_tag :name, @user[:name], { class: 'form-control'} %>
  </div>
  <div class="form-group">
    <%= label :user, :phone %>
    <%= text_field_tag :phone, @user[:phone], { class: 'form-control'} %>
  </div>
  <div class="form-group">
    <%= label :user, :email %>
    <%= text_field_tag :city, @user[:city], { class: 'form-control'} %>
  </div>
  <div class="form-group">
    <%= label :user, :interest %>
    <%= text_area_tag :interest, @user[:interest], { class: 'form-control'} %>
  </div>


  <div class="form-group">
    <%= button_tag t('.submit'), { type: :submit, name: 'user[submit]', value: 'Submit', class: 'btn btn-primary btn-block' } %>
  </div>
  <%= file_field_tag :image , style:"display:none" %>
  </div>
  <div class="col-xs-2">
          <div class="img-preview">
          <%= image_tag "http://localhost:8080/"+@user[:image], { id: 'img-thumbnail', class: 'img-thumbnail', size: '250x250' } %>
        </div>
  </div>
  </div>
<% end %>

<script type="text/javascript">
    $(document).on('click', '#img-thumbnail', function () {
        $('#image').click();
    })

    function handleFileSelect(evt) {
      var files = evt.target.files; // FileList object
      f = files[0]
      // Only process image files.
      if (f.type.match('image.*')) {
        var reader = new FileReader();
        reader.onload = (function (theFile) {
          return function (e) {
            // alert(e.target.result);
            document.getElementById("img-thumbnail").src = e.target.result;
          };
        })(f);

        // Read in the image file as a data URL.
        reader.readAsDataURL(f);
      }
    }
    document.getElementById('image').addEventListener('change', handleFileSelect, false);
</script>

